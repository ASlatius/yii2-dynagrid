/*!
 * @copyright Copyright &copy; Kartik Visweswaran, Krajee.com, 2014
 * @version 1.1.0
 *
 * JQuery Plugin for yii2-dynagrid.
 * 
 * Author: Kartik Visweswaran
 * Copyright: 2014, Kartik Visweswaran, Krajee.com
 * For more JQuery plugins visit http://plugins.krajee.com
 * For more Yii related demos visit http://demos.krajee.com
 */!function(i){var e=function(e,t){return null===e||void 0===e||e==[]||""===e||t&&""===i.trim(e)},t=function(e,t){this.$element=i(e),this.submitMessage=t.submitMessage,this.init(),this.listen()};t.prototype={constructor:t,init:function(){var i=this;i.$form=i.$element.closest("form");var e=i.$form;i.$visibleEl=e.find(".sortable-visible"),i.$hiddenEl=e.find(".sortable-hidden"),i.$visibleKeys=e.find('input[name="visibleKeys"]'),i.$btnSubmit=e.find(".dynagrid-submit"),i.$btnReset=e.find(".dynagrid-reset"),i.$formContainer=i.$form.parent(),i.setColumnKeys(),i.visibleContent=i.$visibleEl.html(),i.hiddenContent=i.$hiddenEl.html(),i.visibleSortableOptions=window[i.$visibleEl.data("pluginOptions")],i.hiddenSortableOptions=window[i.$hiddenEl.data("pluginOptions")]},listen:function(){var t=this;t.$btnSubmit.on("click",function(){t.setColumnKeys(),t.$visibleKeys.val(t.visibleKeys),t.$form.hide(),t.$formContainer.prepend(t.submitMessage),setTimeout(function(){t.$form.submit()},1e3)}),t.$btnReset.on("click",function(){t.$visibleEl.html(t.visibleContent),t.$hiddenEl.html(t.hiddenContent),t.setColumnKeys(),t.$formContainer.find(".dynagrid-submit-message").remove(),t.$visibleEl.sortable(t.visibleSortableOptions),t.$hiddenEl.sortable(t.hiddenSortableOptions)}),t.$form.on("submit",function(){var t=i(this),n="";t.find(".help-block").each(function(){return n=i(this).text(),e(n.trim())?void 0:(t.show(),void t.parent().find(".dynagrid-submit-message").remove())})})},reset:function(){var i=this;i.$visibleEl.html(i.visibleContent),i.$hiddenEl.html(i.hiddenContent),i.setColumnKeys(),i.$formContainer.find(".dynagrid-submit-message").remove(),i.$visibleEl.sortable(i.visibleSortableOptions),i.$hiddenEl.sortable(i.hiddenSortableOptions)},setColumnKeys:function(){var e=this;e.visibleKeys=e.$visibleEl.find("li").map(function(e,t){return i(t).attr("id")}).get().join(",")}},i.fn.dynagrid=function(e){var n=Array.apply(null,arguments);return n.shift(),this.each(function(){var s=i(this),o=s.data("dynagrid"),l="object"==typeof e&&e;o||s.data("dynagrid",o=new t(this,i.extend({},i.fn.dynagrid.defaults,l,i(this).data()))),"string"==typeof e&&o[e].apply(o,n)})},i.fn.dynagrid.defaults={submitMessage:"Applying configuration &hellip;"}}(jQuery);